import{C as i,T as s,G as t,A as e,S as h,a}from"./pixi-CefmzutN.js";import"./vendor-D-bpYjUI.js";!function(){const i=document.createElement("link").relList;if(!(i&&i.supports&&i.supports("modulepreload"))){for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver((i=>{for(const t of i)if("childList"===t.type)for(const i of t.addedNodes)"LINK"===i.tagName&&"modulepreload"===i.rel&&s(i)})).observe(document,{childList:!0,subtree:!0})}function s(i){if(i.ep)return;i.ep=!0;const s=function(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),"use-credentials"===i.crossOrigin?s.credentials="include":"anonymous"===i.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(i);fetch(i.href,s)}}();class r extends i{constructor(i,s){super(),this.app=i,this.onStartGame=s,this.createMenu()}createMenu(){const e=new s("KING OF THE ARENA",{fontFamily:"Arial Black",fontSize:72,fill:16766720,align:"center",stroke:0,strokeThickness:6,dropShadow:!0,dropShadowColor:0,dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:6});e.anchor.set(.5),e.x=this.app.screen.width/2,e.y=this.app.screen.height/3;const h=new i,a=new t;a.lineStyle(4,16766720),a.beginFill(9109504),a.drawRoundedRect(0,0,200,60,15),a.endFill();const r=new s("START GAME",{fontFamily:"Arial",fontSize:28,fill:16777215,align:"center"});r.anchor.set(.5),r.x=100,r.y=30,h.addChild(a),h.addChild(r),h.x=this.app.screen.width/2-100,h.y=2*this.app.screen.height/3,h.eventMode="static",h.cursor="pointer",h.on("pointerover",(()=>{a.tint=14540253,h.scale.set(1.05)})),h.on("pointerout",(()=>{a.tint=16777215,h.scale.set(1)})),h.on("pointerdown",(()=>{a.tint=11184810,h.scale.set(.95)})),h.on("pointerup",(()=>{a.tint=16777215,h.scale.set(1),this.onStartGame()}));const n=new t;n.lineStyle(6,16766720),n.moveTo(e.x-200,e.y-50),n.lineTo(e.x+200,e.y+50),n.moveTo(e.x-200,e.y+50),n.lineTo(e.x+200,e.y-50);const o=(i,s)=>{n.lineStyle(4,9109504),n.drawCircle(i,s,30),n.lineStyle(2,16766720),n.drawCircle(i,s,25)};o(50,50),o(this.app.screen.width-50,50),o(50,this.app.screen.height-50),o(this.app.screen.width-50,this.app.screen.height-50),this.addChild(n),this.addChild(e),this.addChild(h)}}class n{constructor(i){this.graphics=new t,this.player=i,this.damage=10,this.range=50,this.attackSpeed=1,this.color=13421772,this.isAttacking=!1,this.attackCooldown=0}update(i){this.attackCooldown>0&&(this.attackCooldown-=i),this.graphics.x=this.player.x,this.graphics.y=this.player.y,this.graphics.rotation=this.player.graphics.rotation}attack(){return this.attackCooldown<=0&&(this.isAttacking=!0,this.attackCooldown=60*this.attackSpeed,!0)}draw(){}}class o extends n{constructor(i){super(i),this.damage=15,this.range=400,this.attackSpeed=.4,this.color=9127187,this.arrows=[],this.arrowGraphics=new t,i.parent&&i.parent.addChild(this.arrowGraphics),this.draw()}draw(){this.graphics.clear(),this.graphics.lineStyle(3,this.color),this.graphics.beginFill(this.color,0),this.graphics.arc(0,0,15,-Math.PI/3,Math.PI/3),this.graphics.endFill(),this.graphics.lineStyle(1,16777215),this.graphics.moveTo(15*Math.cos(-Math.PI/3),15*Math.sin(-Math.PI/3)),this.graphics.lineTo(15*Math.cos(Math.PI/3),15*Math.sin(Math.PI/3))}update(i){super.update(i),this.arrowGraphics.clear();for(let s=this.arrows.length-1;s>=0;s--){const i=this.arrows[s];if(i.x+=i.velocity.x,i.y+=i.velocity.y,i.distance+=Math.sqrt(i.velocity.x*i.velocity.x+i.velocity.y*i.velocity.y),i.distance>this.range){this.arrows.splice(s,1);continue}this.arrowGraphics.lineStyle(2,this.color);const t=Math.atan2(i.velocity.y,i.velocity.x),e=20,h=5,a=i.x-Math.cos(t)*e/2,r=i.y-Math.sin(t)*e/2,n=i.x+Math.cos(t)*e/2,o=i.y+Math.sin(t)*e/2;if(this.arrowGraphics.moveTo(a,r),this.arrowGraphics.lineTo(n,o),this.arrowGraphics.beginFill(this.color),this.arrowGraphics.moveTo(n,o),this.arrowGraphics.lineTo(n-Math.cos(t-Math.PI/6)*h,o-Math.sin(t-Math.PI/6)*h),this.arrowGraphics.lineTo(n-Math.cos(t+Math.PI/6)*h,o-Math.sin(t+Math.PI/6)*h),this.arrowGraphics.lineTo(n,o),this.arrowGraphics.endFill(),this.player.parent){const t=this.player.parent.children.filter((i=>i.isEnemy));for(const e of t){const t=i.x-e.x,h=i.y-e.y;if(Math.sqrt(t*t+h*h)<20){e.takeDamage(this.damage),this.arrows.splice(s,1);break}}}}}attack(){if(super.attack()){const i=12,s=this.graphics.rotation,t={x:this.player.x+20*Math.cos(s),y:this.player.y+20*Math.sin(s),velocity:{x:Math.cos(s)*i,y:Math.sin(s)*i},distance:0};return this.arrows.push(t),!0}return!1}destroy(){this.arrowGraphics.parent&&this.arrowGraphics.parent.removeChild(this.arrowGraphics),this.arrowGraphics.destroy()}}class c extends n{constructor(i){super(i),this.damage=25,this.range=60,this.attackSpeed=.8,this.color=13421772,this.isSwinging=!1,this.swingProgress=0,this.swingDuration=15,this.swingAngle=1.5*Math.PI,this.baseRotation=0,this.swingDirection=1,this.hitEnemies=new Set,this.draw()}draw(){this.graphics.clear(),this.graphics.lineStyle(4,this.color),this.graphics.moveTo(0,0),this.graphics.lineTo(35,0),this.graphics.lineStyle(4,9127187),this.graphics.moveTo(0,0),this.graphics.lineTo(-10,0),this.graphics.lineStyle(4,this.color),this.graphics.moveTo(-5,-8),this.graphics.lineTo(-5,8)}update(i){if(super.update(i),this.isSwinging){this.swingProgress++;const i=this.swingProgress/this.swingDuration,s=Math.sin(i*Math.PI),t=this.swingAngle*s*this.swingDirection;this.graphics.rotation=this.baseRotation+t,i>.2&&i<.8&&this.checkHits(),this.swingProgress>=this.swingDuration&&(this.isSwinging=!1,this.swingProgress=0,this.hitEnemies.clear(),this.graphics.rotation=this.baseRotation)}else this.baseRotation=this.graphics.rotation}attack(){return!(!super.attack()||this.isSwinging)&&(this.isSwinging=!0,this.swingProgress=0,this.baseRotation=this.graphics.rotation,this.swingDirection*=-1,this.hitEnemies.clear(),!0)}checkHits(){if(!this.player.parent)return;const i=this.player.parent.children.filter((i=>i.isEnemy)),s=this.player.x+35*Math.cos(this.graphics.rotation),t=this.player.y+35*Math.sin(this.graphics.rotation);for(const e of i){if(this.hitEnemies.has(e))continue;const i=s-e.x,h=t-e.y;Math.sqrt(i*i+h*h)<this.range&&(e.takeDamage(this.damage),this.hitEnemies.add(e))}}}class l extends n{constructor(i){super(i),this.damage=35,this.range=35,this.attackSpeed=1.2,this.color=8421504,this.swingAngle=0,this.draw()}draw(){this.graphics.clear(),this.graphics.lineStyle(4,9127187),this.graphics.moveTo(0,0),this.graphics.lineTo(30,0),this.graphics.lineStyle(2,this.color),this.graphics.beginFill(this.color),this.graphics.moveTo(30,-5),this.graphics.lineTo(45,-15),this.graphics.lineTo(45,15),this.graphics.lineTo(30,5),this.graphics.endFill()}attack(){super.attack()&&(this.swingAngle=1.5*Math.PI)}update(i){super.update(i),this.swingAngle>0&&(this.graphics.rotation+=.15,this.swingAngle-=.15)}}class p extends n{constructor(i){super(i),this.damage=30,this.range=45,this.attackSpeed=1,this.color=4620980,this.thrustDistance=0,this.draw()}draw(){this.graphics.clear(),this.graphics.lineStyle(4,9127187),this.graphics.moveTo(0,0),this.graphics.lineTo(40,0),this.graphics.lineStyle(3,this.color),this.graphics.moveTo(40,0),this.graphics.lineTo(50,0),this.graphics.moveTo(40,0),this.graphics.lineTo(45,-10),this.graphics.moveTo(40,0),this.graphics.lineTo(45,10)}attack(){super.attack()&&(this.thrustDistance=20)}update(i){super.update(i),this.thrustDistance>0?(this.graphics.x+=2*Math.cos(this.graphics.rotation),this.graphics.y+=2*Math.sin(this.graphics.rotation),this.thrustDistance-=2):this.thrustDistance<0&&(this.graphics.x=this.player.x,this.graphics.y=this.player.y,this.thrustDistance=0)}}class d extends n{constructor(i){super(i),this.damage=5,this.range=20,this.attackSpeed=.5,this.color=9109504,this.defense=50,this.isBlocking=!1,this.draw()}draw(){this.graphics.clear(),this.graphics.lineStyle(3,4868682),this.graphics.beginFill(this.color),this.graphics.arc(0,0,25,-Math.PI/2,Math.PI/2),this.graphics.lineTo(0,25),this.graphics.lineTo(0,-25),this.graphics.endFill(),this.graphics.lineStyle(2,16766720),this.graphics.moveTo(-5,0),this.graphics.lineTo(5,0),this.graphics.moveTo(0,-15),this.graphics.lineTo(0,15)}attack(){super.attack()&&(this.isBlocking=!0,setTimeout((()=>{this.isBlocking=!1}),500))}block(){this.isBlocking=!0,this.graphics.alpha=.8}stopBlocking(){this.isBlocking=!1,this.graphics.alpha=1}update(i){super.update(i),this.isBlocking||(this.graphics.x=this.player.x+20*Math.cos(this.graphics.rotation),this.graphics.y=this.player.y+20*Math.sin(this.graphics.rotation))}}class g extends i{constructor(i,s){super(),this.app=i,this.onWeaponSelect=s,this.loadAssets()}async loadAssets(){try{await e.load(["/images/bow.png","/images/sword.png","/images/axe.png","/images/trident.png","/images/shield.png"]),this.createMenu()}catch(i){console.error("Failed to load weapon assets:",i),this.createMenu(!0)}}createMenu(a=!1){const r=new s("CHOOSE YOUR WEAPON",{fontFamily:"Arial Black",fontSize:48,fill:16766720,align:"center",stroke:0,strokeThickness:4});r.anchor.set(.5),r.x=this.app.screen.width/2,r.y=50,this.addChild(r);const n=100;[{name:"BOW",class:o,description:"Long range, medium damage",image:"/images/bow.png"},{name:"SWORD",class:c,description:"Medium range, fast attacks",image:"/images/sword.png"},{name:"AXE",class:l,description:"Short range, high damage",image:"/images/axe.png"},{name:"TRIDENT",class:p,description:"Good range, medium damage",image:"/images/trident.png"},{name:"SHIELD",class:d,description:"Defense focused, low damage",image:"/images/shield.png"}].forEach(((r,o)=>{const c=new i,l=new t;if(l.lineStyle(4,16766720),l.beginFill(2829099),l.drawRoundedRect(0,0,300,n,10),l.endFill(),!a)try{const i=e.get(r.image),s=new h(i);s.width=60,s.height=60,s.anchor.set(.5),s.x=40,s.y=50,c.addChild(s)}catch(g){console.warn(`Failed to load icon for ${r.name}:`,g)}const p=new s(r.name,{fontFamily:"Arial Black",fontSize:24,fill:16766720});p.anchor.set(0,.5),p.x=80,p.y=35;const d=new s(r.description,{fontFamily:"Arial",fontSize:16,fill:11184810});d.anchor.set(0,.5),d.x=80,d.y=65,c.addChild(l),c.addChild(p),c.addChild(d),c.x=(this.app.screen.width-300)/2,c.y=150+120*o,c.eventMode="static",c.cursor="pointer",c.on("pointerover",(()=>{l.tint=7829367,c.scale.set(1.05)})),c.on("pointerout",(()=>{l.tint=16777215,c.scale.set(1)})),c.on("pointerdown",(()=>{l.tint=5592405,c.scale.set(.95)})),c.on("pointerup",(()=>{l.tint=16777215,c.scale.set(1),this.onWeaponSelect(r.class)})),this.addChild(c)}))}}class w{constructor(i,s,e){this.x=i,this.y=s,this.config=e,this.speed=5,this.lives=3,this.isInvulnerable=!1,this.radius=20,this.angle=0,this.graphics=new t,this.draw()}draw(){this.graphics.clear(),this.graphics.beginFill(this.isInvulnerable?8947848:16777215),this.graphics.drawCircle(0,0,this.radius),this.graphics.endFill(),this.graphics.lineStyle(3,16711680),this.graphics.moveTo(0,0),this.graphics.lineTo(Math.cos(this.angle)*this.radius,Math.sin(this.angle)*this.radius),this.graphics.x=this.x,this.graphics.y=this.y}handleMouseMove(i,s){const t=i-this.x,e=s-this.y;this.angle=Math.atan2(e,t),this.draw()}takeDamage(){this.isInvulnerable||(this.lives--,this.isInvulnerable=!0,this.draw(),setTimeout((()=>{this.isInvulnerable=!1,this.draw()}),1e3))}applyMovement(i,s){if(0===i&&0===s)return;const t=Math.sqrt(i*i+s*s);i=i/t*this.speed,s=s/t*this.speed;const e=this.x+i,h=this.y+s;Math.sqrt(Math.pow(e-this.config.centerX,2)+Math.pow(h-this.config.centerY,2))<this.config.innerRadius-this.radius&&(this.x=e,this.y=h,this.draw())}getPosition(){return{x:this.x,y:this.y}}}class u{constructor(i,s,e){this.graphics=new t,this.x=i,this.y=s,this.config=e,this.speed=2,this.health=100,this.damage=10,this.radius=20,this.color=16711680,this.isEnemy=!0,this.isAlive=!0,this.draw()}update(i){if(!this.isAlive)return;const s=i.x-this.x,t=i.y-this.y,e=Math.sqrt(s*s+t*t);if(e>this.radius+i.radius){const i=s/e,h=t/e,a=this.x+i*this.speed,r=this.y+h*this.speed;Math.sqrt(Math.pow(a-this.config.centerX,2)+Math.pow(r-this.config.centerY,2))<this.config.innerRadius-this.radius&&(this.x=a,this.y=r,this.graphics.x=this.x,this.graphics.y=this.y)}}draw(){if(this.graphics.clear(),this.graphics.lineStyle(2,0),this.graphics.beginFill(this.health>50?this.color:8912896),this.graphics.drawCircle(0,0,this.radius),this.graphics.endFill(),this.health<100){const i=2*this.radius,s=4,t=this.health/100;this.graphics.lineStyle(1,0),this.graphics.beginFill(0,.5),this.graphics.drawRect(-i/2,-this.radius-10,i,s),this.graphics.endFill(),this.graphics.beginFill(this.health>50?65280:16711680),this.graphics.drawRect(-i/2,-this.radius-10,i*t,s),this.graphics.endFill()}this.graphics.x=this.x,this.graphics.y=this.y}takeDamage(i){return!!this.isAlive&&(this.health-=i,this.draw(),this.health<=0&&(this.isAlive=!1,!0))}checkCollision(i){if(!this.isAlive||!i)return!1;const s=this.x-i.x,t=this.y-i.y;return Math.sqrt(s*s+t*t)<.8*(this.radius+i.radius)}}class y extends u{constructor(i,s,e){super(i,s,e),this.color=8913151,this.health=75,this.preferredDistance=200,this.projectiles=[],this.shootCooldown=0,this.shootDelay=120,this.projectileSpeed=5,this.projectileRadius=5,this.projectileDamage=15,this.projectileGraphics=new t,e.parent&&e.parent.addChild(this.projectileGraphics)}update(i){if(!this.isAlive)return;const s=i.x-this.x,t=i.y-this.y,e=Math.sqrt(s*s+t*t);if(e<this.preferredDistance-50){const i=this.x-s/e*this.speed,h=this.y-t/e*this.speed;Math.sqrt(Math.pow(i-this.config.centerX,2)+Math.pow(h-this.config.centerY,2))<this.config.innerRadius-this.radius&&(this.x=i,this.y=h)}else if(e>this.preferredDistance+50){const i=this.x+s/e*this.speed,h=this.y+t/e*this.speed;Math.sqrt(Math.pow(i-this.config.centerX,2)+Math.pow(h-this.config.centerY,2))<this.config.innerRadius-this.radius&&(this.x=i,this.y=h)}this.shootCooldown>0?this.shootCooldown--:e<1.5*this.preferredDistance&&i.isAlive&&!i.isInvulnerable&&this.shoot(i),this.projectileGraphics.clear();for(let h=this.projectiles.length-1;h>=0;h--){const s=this.projectiles[h];if(s.x+=s.dx*this.projectileSpeed,s.y+=s.dy*this.projectileSpeed,s.distance+=this.projectileSpeed,!i.isInvulnerable){const t=s.x-i.x,e=s.y-i.y;if(Math.sqrt(t*t+e*e)<this.projectileRadius+i.radius){i.takeDamage(this.projectileDamage),this.projectiles.splice(h,1);continue}}s.distance>2*this.preferredDistance?this.projectiles.splice(h,1):(this.projectileGraphics.lineStyle(2,16711935,.5),this.projectileGraphics.moveTo(s.x-10*s.dx,s.y-10*s.dy),this.projectileGraphics.lineTo(s.x,s.y),this.projectileGraphics.lineStyle(2,16711935),this.projectileGraphics.beginFill(16711935),this.projectileGraphics.drawCircle(s.x,s.y,this.projectileRadius),this.projectileGraphics.endFill())}this.graphics.x=this.x,this.graphics.y=this.y}shoot(i){const s=i.x-this.x,t=i.y-this.y,e=Math.atan2(t,s)+.2*(Math.random()-.5),h=Math.cos(e),a=Math.sin(e);this.projectiles.push({x:this.x+h*(this.radius+5),y:this.y+a*(this.radius+5),dx:h,dy:a,distance:0}),this.shootCooldown=this.shootDelay}draw(){if(this.graphics.clear(),this.graphics.lineStyle(2,0),this.graphics.beginFill(this.health>35?this.color:4456618),this.graphics.drawCircle(0,0,this.radius),this.graphics.endFill(),this.graphics.lineStyle(2,16711935,.5),this.graphics.drawCircle(0,0,this.radius+5),this.health<75){const i=2*this.radius,s=4,t=this.health/75;this.graphics.lineStyle(1,0),this.graphics.beginFill(0,.5),this.graphics.drawRect(-i/2,-this.radius-10,i,s),this.graphics.endFill(),this.graphics.beginFill(this.health>35?65280:16711680),this.graphics.drawRect(-i/2,-this.radius-10,i*t,s),this.graphics.endFill()}this.graphics.x=this.x,this.graphics.y=this.y}destroy(){super.destroy(),this.projectileGraphics.parent&&this.projectileGraphics.parent.removeChild(this.projectileGraphics),this.projectileGraphics.destroy()}}(async()=>{const t=new a;await t.init({width:1800,height:950,backgroundColor:1710618}),document.body.appendChild(t.canvas);let e=new i,h=new i;const n=new i,o=new i;e.visible=!1,o.visible=!1,t.stage.addChild(e),t.stage.addChild(n),t.stage.addChild(o);let c=null,l=null,p=null,d=null;const m={score:0,isGameOver:!1,mobs:[],spawnInterval:120,spawnTimer:120,maxMobs:20,keys:{w:!1,a:!1,s:!1,d:!1}},f={centerX:t.screen.width/2,centerY:t.screen.height/2,outerRadius:500,innerRadius:420,segments:64,wallColor:2829099,wallHighlight:4013373,arenaColor:4208688,archHeight:40},v=i=>{switch(i.key.toLowerCase()){case"w":m.keys.w=!0;break;case"a":m.keys.a=!0;break;case"s":m.keys.s=!0;break;case"d":m.keys.d=!0}i.preventDefault()},x=i=>{switch(i.key.toLowerCase()){case"w":m.keys.w=!1;break;case"a":m.keys.a=!1;break;case"s":m.keys.s=!1;break;case"d":m.keys.d=!1}i.preventDefault()},M=i=>{if(c&&!m.isGameOver){const s=t.canvas.getBoundingClientRect(),e=i.clientX-s.left,h=i.clientY-s.top;c.handleMouseMove(e,h),l&&l.updateRotation(e,h)}},k=i=>{l&&!m.isGameOver&&l.attack(m.mobs)};function S(){n.visible=!1,o.visible=!0,e.visible=!1}function C(i){if(m.isGameOver)return;let s=0,t=0;if(m.keys.w&&(t-=1),m.keys.s&&(t+=1),m.keys.a&&(s-=1),m.keys.d&&(s+=1),0!==s&&0!==t){const i=Math.sqrt(s*s+t*t);s/=i,t/=i}c&&(c.applyMovement(s,t),l&&l.update(i));for(let h=m.mobs.length-1;h>=0;h--){const i=m.mobs[h];if(i.isAlive){if(i.update(c),i.checkCollision(c)&&(c.takeDamage(),d.text="Lives: "+c.lives,c.lives<=0))return void b()}else e.removeChild(i.graphics),m.mobs.splice(h,1),m.score+=10,p.text="Score: "+m.score}m.spawnTimer--,m.spawnTimer<=0&&m.mobs.length<m.maxMobs&&(!function(){if(m.isGameOver)return;const i=Math.random()*Math.PI*2,s=f.outerRadius+50,t=f.centerX+Math.cos(i)*s,h=f.centerY+Math.sin(i)*s,a=new(Math.random()<.7?u:y)(t,h,f);m.mobs.push(a),e.addChild(a.graphics)}(),m.spawnTimer=m.spawnInterval)}function b(){m.isGameOver=!0,window.removeEventListener("keydown",v),window.removeEventListener("keyup",x),window.removeEventListener("mousemove",M),window.removeEventListener("mousedown",k),t.ticker.remove(C);const i=new s("Game Over!\nScore: "+m.score,{fontFamily:"Arial",fontSize:48,fill:16777215,align:"center"});i.anchor.set(.5),i.x=f.centerX,i.y=f.centerY,e.addChild(i),setTimeout((()=>{e.removeChildren(),h&&t.stage.removeChild(h),S()}),2e3)}const T=new r(t,S);n.addChild(T);const G=new g(t,(function(a){m.score=0,m.isGameOver=!1,m.mobs=[],m.spawnTimer=m.spawnInterval,e.removeChildren(),h&&t.stage.removeChild(h),e=new i,h=new i,t.stage.addChild(h),t.stage.addChild(e),o.visible=!1,e.visible=!0,c=new w(f.centerX,f.centerY,f),l=new a(c),e.addChild(c.graphics),e.addChild(l.graphics),p=new s("Score: 0",{fontFamily:"Arial",fontSize:24,fill:16777215}),p.x=10,p.y=10,e.addChild(p),d=new s("Lives: "+c.lives,{fontFamily:"Arial",fontSize:24,fill:16777215}),d.x=10,d.y=40,e.addChild(d),window.addEventListener("keydown",v),window.addEventListener("keyup",x),window.addEventListener("mousemove",M),window.addEventListener("mousedown",k),t.ticker.add(C)}));o.addChild(G)})();
//# sourceMappingURL=index-WbCcMiAe.js.map
